{
  # Production configuration with HTTPS
}

fredav-videoparty.freeddns.org {
  encode zstd gzip

  # Note: CORS headers are handled by the VideoParty server
  # Only non-CORS security headers here to avoid duplicates
  header {
    X-Content-Type-Options "nosniff"
    Referrer-Policy "no-referrer"
    Permissions-Policy "autoplay=(), fullscreen=(), microphone=()"
  # Enable HSTS once you're sure HTTPS works everywhere:
  # Strict-Transport-Security "max-age=31536000; includeSubDomains"
  }

  # Reverse proxy to local Node server with health checks
  reverse_proxy localhost:8080 {
    health_uri /api/health
    health_interval 30s
    health_timeout 5s
  }
}
